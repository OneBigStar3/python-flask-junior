{% extends 'layout.html' %}

{% block title %}Keywords{% endblock %}

{% block style %}
<style>
:root{
  /* animations constants */
  --steps: 10;
  --saturation: 80%;
  --lightness: 60%;
  --hue-offset: 320;
  --duration: 3000ms;

  /* generate some colors */
  --color-01: hsl( calc( 360 / var(--steps) *  7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-02: hsl( calc( 360 / var(--steps) *  7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-03: hsl( calc( 360 / var(--steps) *  7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-04: hsl( calc( 360 / var(--steps) *  7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-05: hsl( calc( 360 / var(--steps) *  7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-06: hsl( calc( 360 / var(--steps) *  7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-07: hsl( calc( 360 / var(--steps) *  7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-08: hsl( calc( 360 / var(--steps) *  7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-09: hsl( calc( 360 / var(--steps) * 7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-10: hsl( calc( 360 / var(--steps) * 7 + var(--hue-offset)), var(--saturation), var(--lightness) );
  --color-11: hsl( calc( 360 / var(--steps) * 7 + var(--hue-offset)), var(--saturation), var(--lightness) );  
  --color-crayon: #202036;

  /* build some backgrounds */
  --bg-01-a: no-repeat left       0% top    / 11%   0% linear-gradient(to right, var(--color-01), var(--color-02));
  --bg-01-b: no-repeat left       0% top    / 11% 100% linear-gradient(to right, var(--color-01), var(--color-02));
  --bg-02-a: no-repeat left   11.11% bottom / 11%   0% linear-gradient(to right, var(--color-02), var(--color-03));
  --bg-02-b: no-repeat left   11.11% bottom / 11% 100% linear-gradient(to right, var(--color-02), var(--color-03));
  --bg-03-a: no-repeat left   22.22% top    / 11%   0% linear-gradient(to right, var(--color-03), var(--color-04));
  --bg-03-b: no-repeat left   22.22% top    / 11% 100% linear-gradient(to right, var(--color-03), var(--color-04));
  --bg-04-a: no-repeat left   33.33% bottom / 11%   0% linear-gradient(to right, var(--color-04), var(--color-05));
  --bg-04-b: no-repeat left   33.33% bottom / 11% 100% linear-gradient(to right, var(--color-04), var(--color-05)); 
  --bg-05-a: no-repeat left   44.44% top    / 11%   0% linear-gradient(to right, var(--color-05), var(--color-06));
  --bg-05-b: no-repeat left   44.44% top    / 11% 100% linear-gradient(to right, var(--color-05), var(--color-06)); 
  --bg-06-a: no-repeat left   55.55% bottom / 11%   0% linear-gradient(to right, var(--color-06), var(--color-07));
  --bg-06-b: no-repeat left   55.55% bottom / 11% 100% linear-gradient(to right, var(--color-06), var(--color-07)); 
  --bg-07-a: no-repeat left   66.66% top    / 11%   0% linear-gradient(to right, var(--color-07), var(--color-08));
  --bg-07-b: no-repeat left   66.66% top    / 11% 100% linear-gradient(to right, var(--color-07), var(--color-08));
  --bg-08-a: no-repeat left   77.77% bottom / 11%   0% linear-gradient(to right, var(--color-08), var(--color-09));
  --bg-08-b: no-repeat left   77.77% bottom / 11% 100% linear-gradient(to right, var(--color-08), var(--color-09));
  --bg-09-a: no-repeat left   88.88% top    / 11%   0% linear-gradient(to right, var(--color-09), var(--color-10));
  --bg-09-b: no-repeat left   88.88% top    / 11% 100% linear-gradient(to right, var(--color-09), var(--color-10));  
  --bg-10-a: no-repeat left   99.99% bottom / 11%   0% linear-gradient(to right, var(--color-10), var(--color-11));
  --bg-10-b: no-repeat left   99.99% bottom / 12% 100% linear-gradient(to right, var(--color-10), var(--color-11));   
}

.rainbow-marker-loader {
  height:3rem;
  width:15rem;
  max-width:100%;
  border:.5rem solid var(--color-crayon);
  border-radius:.5rem;
  animation: infinite alternate rainbow-fill var(--duration) ease-in-out;
  box-sizing:border-box;
  position:relative;
  background:
    var(--bg-01-a),
    var(--bg-02-a),
    var(--bg-03-a),
    var(--bg-04-a),
    var(--bg-05-a),
    var(--bg-06-a),
    var(--bg-07-a),
    var(--bg-08-a),
    var(--bg-09-a),
    var(--bg-10-a); 
}

.rainbow-marker-loader::after{
  content:'';
  display:block;
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  transform-origin:left center;
  border-radius:.5rem;
  box-sizing:border-box;  
  margin-top:-7.5%;
  margin-left:-2.5%;
  animation: infinite alternate move-marker var(--duration) ease-in-out;    
  background:
    no-repeat left   0% top    / 3rem  50% linear-gradient(to bottom right, transparent, transparent 40%, var(--color-crayon) 40%),
    no-repeat left   0% bottom / 3rem  50% linear-gradient(to top right, transparent, transparent 40%, var(--color-crayon) 40%),
    no-repeat left 3rem bottom / 100% 100% linear-gradient( var(--color-crayon), var(--color-crayon))
}

@keyframes move-marker{
  10%{
    transform: translate(5%, 100%) rotate(2.5deg);
  }
  20%{
    transform: translate(20%, 0) rotate(-5deg);
  }
  30%{
    transform: translate(30%, 100%) rotate(2.5deg);
  }  
  40%{
    transform: translate(40%, 0) rotate(-5deg);
  } 
  50%{
    transform: translate(50%, 100%) rotate(2.5deg);
  }   
  60%{
    transform: translate(60%, 0) rotate(-5deg);
  }   
  70%{
    transform: translate(70%, 100%) rotate(2.5deg);
  }  
  80%{
    transform: translate(80%, 0) rotate(-5deg);
  }  
  90%{
    transform: translate(90%, 100%) rotate(2.5deg);
  }  
  100%{
    transform: translate(100%, 0) rotate(-5deg);
  }   
}

@keyframes rainbow-fill{
  0%{
    background:
      var(--bg-01-a),
      var(--bg-02-a),
      var(--bg-03-a),
      var(--bg-04-a),
      var(--bg-05-a),
      var(--bg-06-a),
      var(--bg-07-a),
      var(--bg-08-a),
      var(--bg-09-a),
      var(--bg-10-a);
  }
  10%{
    background:
      var(--bg-01-b),
      var(--bg-02-a),
      var(--bg-03-a),
      var(--bg-04-a),
      var(--bg-05-a),
      var(--bg-06-a),
      var(--bg-07-a),
      var(--bg-08-a),  
      var(--bg-09-a), 
      var(--bg-10-a);      
  }
  20%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-a),   
      var(--bg-04-a),
      var(--bg-05-a),
      var(--bg-06-a),
      var(--bg-07-a),  
      var(--bg-08-a),
      var(--bg-09-a),
      var(--bg-10-a);      
  }
  30%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-b),
      var(--bg-04-a),
      var(--bg-05-a),
      var(--bg-06-a),
      var(--bg-07-a),  
      var(--bg-08-a),
      var(--bg-09-a),
      var(--bg-10-a);      
  }
  40%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-b),
      var(--bg-04-b), 
      var(--bg-05-a), 
      var(--bg-06-a), 
      var(--bg-07-a),  
      var(--bg-08-a),
      var(--bg-09-a),
      var(--bg-10-a);      
  }
  50%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-b),
      var(--bg-04-b), 
      var(--bg-05-b), 
      var(--bg-06-a),
      var(--bg-07-a),   
      var(--bg-08-a),
      var(--bg-09-a),
      var(--bg-10-a);      
  }
  60%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-b),
      var(--bg-04-b), 
      var(--bg-05-b), 
      var(--bg-06-b), 
      var(--bg-07-a),   
      var(--bg-08-a),
      var(--bg-09-a),
      var(--bg-10-a);      
  }    
  70%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-b),
      var(--bg-04-b), 
      var(--bg-05-b), 
      var(--bg-06-b), 
      var(--bg-07-b),  
      var(--bg-08-a),
      var(--bg-09-a),
      var(--bg-10-a);      
  }  
  80%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-b),
      var(--bg-04-b), 
      var(--bg-05-b), 
      var(--bg-06-b), 
      var(--bg-07-b),  
      var(--bg-08-b),
      var(--bg-09-a),
      var(--bg-10-a);      
  }
  90%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-b),
      var(--bg-04-b), 
      var(--bg-05-b), 
      var(--bg-06-b), 
      var(--bg-07-b),  
      var(--bg-08-b),
      var(--bg-09-b), 
      var(--bg-10-a);     
  }   
  100%{
    background:
      var(--bg-01-b),
      var(--bg-02-b),
      var(--bg-03-b),
      var(--bg-04-b), 
      var(--bg-05-b), 
      var(--bg-06-b), 
      var(--bg-07-b),  
      var(--bg-08-b),
      var(--bg-09-b), 
      var(--bg-10-b);     
  }
}


/* for demo */
#loading{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:1rem 1rem 2rem 1rem;
  box-sizing:border-box;
  overflow:hidden;
  box-shadow: none;
  background: transparent;
  margin: 0px;
}

.title{
  color:var(--color-crayon);
  font-size:1.5rem;
  font-family: 'M PLUS Rounded 1c', sans-serif; 
  text-transform:uppercase;
  letter-spacing:1px;
}
</style>
{% endblock %}

{% block scripts %}

<script src="{{ url_for('static', filename='assets/js/ajax.js') }}"></script>

{% endblock %}

{% block content %}
<h2>Keywords Page</h2>
<p>Welcome back, {{ username }}!<br>
  <br>
  <b>Keywords Definitions</b><br>
  <u>SpaCy</u> is all in one python library for Natural Language Processing tasks.<br>
  <u>Yake</u> Yet Another Keyword Extractor, library selects the most important keywords using the text statistical features method.<br>
  <u>Rake-Nltk</u> Rapid Automatic Keyword Extraction algorithm holds ranked keyword data.<br>
</p>
<div id="cont">
  <div class="column left">
        <div class="select-box">
          <label for="select-box1" class="label select-box1"><span class="label-desc">Choose Kind Of Keyword Extraction</span> </label>
          <span class="dropdown-el" id="select-boc">
            <input type="radio" name="select-box1" value="no-value" checked="checked"id="default" required="required"><label for="default" style="padding: 5px;">Choose Extraction Method</label>
            <input type="radio" name="select-box1" value="spacy-submit" {% if request.form.get('select-box1') == 'spacy-submit' %} checked="checked" {% endif %}   id="spaCy"><label for="spaCy" style="padding: 5px;">Spacy</label>
            <input type="radio" name="select-box1" value="yake-submit" {% if request.form.get('select-box1') == 'yake-submit' %} checked="checked" {% endif %}  id="yake"><label for="yake" style="padding: 5px;">YAKE</label>
            <input type="radio" name="select-box1" value="rake-submit" {% if request.form.get('select-box1') == 'rake-submit' %} checked="checked" {% endif %}   id="rake"><label for="rake" style="padding: 5px;">RAKE Nltk</label>
            <!--<input type="radio" name="select-box1" value="gensim-submit" {% if request.form.get('select-box1') == 'gensim-submit' %} checked="checked" {% endif %}  id="gensim"><label for="gensim">Gensim</label>-->
          </span>
    </div><br>
    <div  id="maxCount">
      <label class="range-label" for="ngram">Max Word Count Of The Extracted Keyword</label>      
      <div class="range-wrap">
        <input type="range" class="range" id="ngramCount" name="ngram" min="1" max="5" value="{{ request.form['ngram'] }}">
        <output class="bubble"></output>
        <p style="float:left;padding:0px;">1</p><p style="float:right;padding:0px;">5</p>
      </div>    
    </div><br>        
    <div  id="duplicateCount">
      <label class="range-label" for="dupli">Duplication Of Words In Keywords</label>
      <div class="range-wrap">
        <input type="range" class="range" id="dupValue" name="dupli" min="1" max="9" value="{{ request.form['dupli'] }}">
        <output class="bubble"></output>
        <p style="float:left;padding:0px;">0.1</p><p style="float:right;padding:0px;">0.9</p>
      </div>      
    </div><br>        
    <div  id="keyCount">
      <label class="range-label" for="count">Number Of Keywords To Be Extracted</label>
      <div class="range-wrap">
        <input type="range" class="range" name="count" id="countValue" min="1" max="30" value="{{ request.form['count'] }}">
        <output class="bubble"></output>
        <p style="float:left;padding:0px;">1</p><p style="float:right;padding:0px;">30</p>
      </div><br><br>
    </div>
  </div>
  <div class="column right" id="right">
    <h2 class="head2">Keyword Generator</h2>
    <label for="keywords">Enter your text in the box below</label>
      <textarea name="keywords" id="keywords" cols="30" rows="10">{{ request.form['keywords'] }}</textarea>
    <input type="submit" class="submitButton" value="Submit" onclick="keywords_submit()">
    <input type="reset" value="Cancel" class="submitButton">
    <button type="button" class="submitButton" onclick="document.getElementById('results').value = ''">Clear</button>
    <input type="button" class="submitButton" value="Export" id="export">
    <br>
    <br>
      <div id="loading" style="display:none;">
        <h1 class="title">Loading</h1>
        <div class="rainbow-marker-loader"></div>
    </div>
    <div><p>Keyword Results</p></div>
    <div class="clipboard">
      <textarea name="results" id="results" cols="30" rows="10">{{ words }}</textarea>
      <div class="tooltip">
        <button onclick="myFunction()" onmouseout="outFunc()">
          <span class="tooltiptext" id="myTooltip">Copy to clipboard</span>
          <i class="fas fa-paste"></i>
        </button>
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src="{{ url_for('static', filename='index.js') }}"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
{% endblock %}